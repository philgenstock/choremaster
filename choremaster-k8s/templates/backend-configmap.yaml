{{- if .Values.backend.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: choremaster-backend-config
  labels:
    app: {{ .Chart.Name }}
    component: backend
data:
  application-prod.yaml: |
    spring:
      application:
        name: choremaster
      datasource:
        url: jdbc:postgresql://choremaster-postgresql:5432/{{ .Values.postgresql.database.name }}
        username: ${SPRING_DATASOURCE_USERNAME}
        password: ${SPRING_DATASOURCE_PASSWORD}
        driver-class-name: org.postgresql.Driver
      jpa:
        hibernate:
          ddl-auto: validate
        show-sql: false
        properties:
          hibernate:
            dialect: org.hibernate.dialect.PostgreSQLDialect

    springdoc:
      api-docs:
        path: /api-docs
      swagger-ui:
        path: /swagger-ui.html
        enabled: true

    google:
      oauth:
        client-id: {{ .Values.google.oauth.clientId }}
{{- end }}
